# Development Guide

## Setting up for Development

### Prerequisites

Install required R packages:

```r
install.packages(c("devtools", "testthat", "roxygen2"))
```

### Installing the Package

Build and install the package locally:

```bash
R CMD build .
R CMD INSTALL bakepipe_0.0.0.9000.tar.gz
```

Or using devtools:

```r
devtools::install()
```

## Running Tests

### Using devtools (recommended)

```r
devtools::test()
```

### Using R CMD check

```bash
R CMD check --no-manual --no-vignettes .
```

### Manual testing

Load the package and test functions:

```r
library(bakepipe)

# Test file_in
file_in("test.csv")  # Should return "test.csv"

# Test file_out  
file_out("output.csv")  # Should return "output.csv"
```

## Package Structure

- `R/` - Package functions
  - `file_in.R` - Mark input files
  - `file_out.R` - Mark output files
  - `run.R` - Execute pipeline (not yet implemented)
  - `status.R` - Show pipeline status (not yet implemented)
- `tests/testthat/` - Unit tests
- `man/` - Documentation (generated by roxygen2)
- `DESCRIPTION` - Package metadata
- `NAMESPACE` - Package exports (generated by roxygen2)

## Sample Project

A complete sample project is available in `sample-project/` to demonstrate bakepipe functionality and for testing during development.

### Sample Project Structure

```
sample-project/
├── .Rprofile                 # Automatic bakepipe setup for R sessions
├── _bakepipe.R               # Pipeline configuration file
├── raw_data.csv              # Sample input dataset
├── 01_clean_data.R           # Data cleaning script
├── 02_analyze_data.R         # Data analysis script
└── 03_generate_report.R      # Report generation script
```

### Using the Sample Project

#### Option 1: Manual setup
```r
devtools::load_all()
setwd("sample-project")
status()  # View pipeline structure
run()     # Execute pipeline
```

#### Option 2: Automatic setup
```bash
cd sample-project
R  # The .Rprofile automatically loads bakepipe
```

### Pipeline Root Marker

The `_bakepipe.R` file marks the root directory of a bakepipe project:

```r
# Bakepipe root marker
# This file marks the root directory of a bakepipe project
```

This file helps bakepipe functions identify the project root directory.

### Expected Output

After running the pipeline, the following files should be generated:
- `cleaned_data.csv` - Cleaned dataset with age groups
- `analysis_results.rds` - R data structure with analysis results  
- `report.txt` - Human-readable summary report

## Generating Documentation

```r
devtools::document()
```

This updates the NAMESPACE file and generates man pages from roxygen2 comments.