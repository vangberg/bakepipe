{"id":"bakepipe-0bc","content_hash":"07a004cd8b867b5e9ea05531806815eedb60db83107957bba45eec0f8a4c3418","title":"Targets backend: integration \u0026 edge case tests","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-18T14:07:12.815607+01:00","updated_at":"2025-11-18T14:07:12.815607+01:00","source_repo":"."}
{"id":"bakepipe-0i7","content_hash":"f5f5afe4d19dcf21f95a43999515090f57bd56836fe29fa7fa7c0dcb9cdf9254","title":"Verify backward compatibility of API","description":"Ensure existing bakepipe code continues to work\n\nCompatibility checks:\n- file_in(), file_out(), external_in() - same behavior\n- run(), status(), clean() - same API, same outputs\n- Error messages - similar quality and clarity\n- Return values - same structure\n- Side effects - similar file creation patterns\n\nBreaking changes to document:\n- _targets.R is now generated (add to .gitignore)\n- _targets/ directory created (metadata storage)\n- Possibly different parallelization behavior\n- Different error stack traces\n\nVerification:\n- All existing tests still pass\n- Example code from README works unchanged\n- Any vignette examples work unchanged\n- Migration guide for breaking changes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-18T10:47:54.253835+01:00","updated_at":"2025-11-18T11:38:32.086075+01:00","closed_at":"2025-11-18T11:38:32.08608+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-0i7","depends_on_id":"bakepipe-7ho","type":"blocks","created_at":"2025-11-18T10:50:04.943212+01:00","created_by":"daemon"}]}
{"id":"bakepipe-0l7","content_hash":"5b34c5186091eb8c5149a1dc4dbeb803ae68e102bd303c1cab420612c2dca756","title":"Modify status() to use targets::tar_outdated()","description":"Implement status() using targets for dependency info\n\nImplementation:\n- Generate _targets.R before checking status\n- Use targets::tar_outdated() to identify what needs running\n- Use targets::tar_visnetwork() or tar_manifest() for graph info\n- Pretty print in bakepipe style (maintain existing UX)\n- Show script-level status (not internal target details)\n\nVerification:\n- Test: Fresh pipeline shows all scripts need running\n- Test: After run(), status shows up-to-date\n- Test: Modified input file shows dependent scripts outdated\n- Test: Fine-grained deps - only affected scripts marked outdated\n- Visual: Output format matches existing status() style\n- Performance: status() completes in \u003c 1 second for 50 scripts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T10:46:47.585142+01:00","updated_at":"2025-11-18T11:17:33.945595+01:00","closed_at":"2025-11-18T11:17:33.9456+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-0l7","depends_on_id":"bakepipe-6p1","type":"blocks","created_at":"2025-11-18T10:49:56.997321+01:00","created_by":"daemon"}]}
{"id":"bakepipe-1x0","content_hash":"6bf387009fa188a74720af630a1821b13ccfeec8b8c7236196125e9e665a584b","title":"Targets backend: core target generation","description":"","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-11-18T14:07:12.678863+01:00","updated_at":"2025-11-18T14:09:04.783287+01:00","source_repo":"."}
{"id":"bakepipe-6p1","content_hash":"d568415ba3ce65915f165a7a500a17c356f69bf6e5241606e9358532f08e96ac","title":"Implement generate_targets_file() function","description":"Create generate_targets_file() that uses existing parse() to generate _targets.R\n\nImplementation:\n- Parse all scripts using existing parse()\n- Generate target definitions for:\n  - Script file targets (format = \"file\")\n  - External input file targets (format = \"file\")\n  - Execution targets (run_* - uses callr::r() to execute, NOT source())\n  - Output file targets (dependent on run_*)\n- Infer fine-grained dependencies from file_in() calls\n- Write to _targets.R with proper formatting\n- Use callr for script execution to match existing bakepipe behavior\n\nVerification:\n- Unit test: Parse simple script with file_in/file_out, verify _targets.R structure\n- Test: Script with multiple outputs generates separate targets\n- Test: file_in() calls create correct dependencies (not all outputs)\n- Test: external_in() creates external file targets\n- Test: Generated targets use callr::r() not source()\n- Integration: Generated _targets.R loads without errors\n- Integration: targets::tar_manifest() shows expected graph","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-18T10:44:22.030494+01:00","updated_at":"2025-11-18T11:08:36.364232+01:00","closed_at":"2025-11-18T11:08:36.364237+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-6p1","depends_on_id":"bakepipe-b9q","type":"blocks","created_at":"2025-11-18T10:49:56.943285+01:00","created_by":"daemon"}]}
{"id":"bakepipe-7ho","content_hash":"2b0386f4981784bf8ae7d98cf97994ce9d555b14977c0c9906666d0ec762a156","title":"Create integration tests for full pipeline workflow","description":"End-to-end tests for complete workflows with targets backend\n\nTest scenarios:\n1. Simple linear pipeline (A -\u003e B -\u003e C)\n2. Pipeline with branching (A -\u003e B,C -\u003e D)\n3. Pipeline with multiple outputs per script\n4. Pipeline with external_in() dependencies\n5. Incremental runs (modify middle file)\n6. Error recovery (script fails, fix, rerun)\n7. Fine-grained dependencies (file_in specific outputs)\n\nEach test should:\n- Create realistic multi-script workflow in temp dir\n- Run complete cycle: run() -\u003e status() -\u003e modify -\u003e run() -\u003e clean()\n- Verify outputs are created correctly\n- Verify only necessary scripts rerun\n- Check _targets.R is generated correctly\n\nVerification:\n- All integration tests pass\n- Total test time \u003c 30 seconds\n- Tests clean up after themselves\n- No targets warnings/errors in test output","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-18T10:47:18.353677+01:00","updated_at":"2025-11-18T11:34:59.088471+01:00","closed_at":"2025-11-18T11:34:59.088476+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-7ho","depends_on_id":"bakepipe-ba8","type":"blocks","created_at":"2025-11-18T10:50:00.754103+01:00","created_by":"daemon"},{"issue_id":"bakepipe-7ho","depends_on_id":"bakepipe-0l7","type":"blocks","created_at":"2025-11-18T10:50:00.777861+01:00","created_by":"daemon"},{"issue_id":"bakepipe-7ho","depends_on_id":"bakepipe-kxa","type":"blocks","created_at":"2025-11-18T10:50:00.801163+01:00","created_by":"daemon"}]}
{"id":"bakepipe-8iu","content_hash":"462fbb3c6b8a10bdba02c0269e5748d841479daecb84031ed947dff7bb5168e2","title":"Update documentation to mention targets backend","description":"Update all documentation to reflect targets backend\n\nUpdates needed:\n- README: Explain bakepipe is frontend for targets\n- README: Mention benefits (mature backend, ecosystem access)\n- Vignettes: Update any implementation details\n- Function docs: Note targets is used internally\n- Add note: Users can inspect _targets.R\n- Add note: Can use targets functions directly if needed\n- Migration: Explain _targets.R is auto-generated\n\nVerification:\n- devtools::document() runs without warnings\n- All examples in docs still work\n- pkgdown site builds successfully\n- Spell check passes\n- Technical accuracy review","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-18T10:47:30.472912+01:00","updated_at":"2025-11-18T10:47:37.742187+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-8iu","depends_on_id":"bakepipe-7ho","type":"blocks","created_at":"2025-11-18T10:50:05.000075+01:00","created_by":"daemon"}]}
{"id":"bakepipe-9f0","content_hash":"6baa823ee74b8fcf7f1e38ded332377a331d5cec8559c8e6e86c5daa80acfe09","title":"Example workflow to demonstrate fine-grained deps","description":"Create example that showcases fine-grained dependency tracking\n\nExample scenario:\n- Script 01: Reads external CSV, outputs A.csv and B.csv\n- Script 02: Reads A.csv (via file_in), outputs analysis_A.csv\n- Script 03: Reads B.csv (via file_in), outputs analysis_B.csv\n- Script 04: Reads both analyses, creates final report\n\nDemonstrates:\n1. Initial run executes all scripts\n2. Modify B.csv -\u003e only scripts 01, 03, 04 rerun (NOT script 02!)\n3. This is the key benefit - fine-grained tracking\n4. Show _targets.R has separate targets for A.csv and B.csv\n5. Show tar_visnetwork() graph clearly shows dependencies\n\nVerification:\n- Example runs successfully\n- Behavior matches description\n- Could be used in vignette or README\n- _targets.R is well-commented for learning","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-18T10:48:23.890538+01:00","updated_at":"2025-11-18T10:48:32.641753+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-9f0","depends_on_id":"bakepipe-7ho","type":"blocks","created_at":"2025-11-18T10:50:04.971178+01:00","created_by":"daemon"}]}
{"id":"bakepipe-b9q","content_hash":"15c22c1e422f0cfc3d607f7254b4a67136cf16ba8509492342345d658de834f8","title":"Write tests for generate_targets_file()","description":"Write comprehensive tests BEFORE implementing generate_targets_file()\n\nTest cases:\n1. Simple script: one input, one output\n2. Multiple outputs: verify separate targets created\n3. File dependencies: file_in() creates correct target dependencies\n4. External inputs: external_in() handling\n5. Multiple scripts: proper chain of dependencies\n6. Script changes: verify script file target tracking\n7. Edge cases: no inputs, no outputs, circular deps\n\nEach test should:\n- Create temp directory with test scripts\n- Call generate_targets_file()\n- Verify _targets.R contents\n- Optionally: source _targets.R and check targets::tar_manifest()\n\nVerification:\n- All tests pass\n- Test coverage \u003e= 90% for generate_targets_file()\n- Tests run in \u003c 5 seconds","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-18T10:45:01.306409+01:00","updated_at":"2025-11-18T11:02:40.978921+01:00","closed_at":"2025-11-18T11:02:40.978926+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-b9q","depends_on_id":"bakepipe-rhv","type":"blocks","created_at":"2025-11-18T10:49:56.914341+01:00","created_by":"daemon"}]}
{"id":"bakepipe-ba8","content_hash":"033aa055df6f1b03895e78862d17aae8d33f60d6f0575b1067f474d976519cf8","title":"Modify run() to use targets::tar_make()","description":"Replace current run() implementation with targets backend\n\nImplementation:\n- Generate _targets.R before running (call generate_targets_file())\n- Call targets::tar_make() to execute pipeline\n- Preserve bakepipe's user-facing API and error messages\n- Handle targets errors gracefully\n- Pass through relevant options (e.g., script_dir)\n- Ensure callr is used for script execution (matching existing behavior)\n\nVerification:\n- Test: Simple pipeline runs successfully\n- Test: Modified file triggers correct reruns\n- Test: Unmodified pipeline skips execution\n- Test: Error in script is caught and reported clearly\n- Test: Multiple outputs - only dependent scripts rerun\n- Test: Scripts execute in isolation (via callr)\n- Integration: Run existing example workflows\n- Manual: Compare output with previous bakepipe version","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-18T10:46:34.989168+01:00","updated_at":"2025-11-18T11:13:58.16534+01:00","closed_at":"2025-11-18T11:13:58.165344+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-ba8","depends_on_id":"bakepipe-6p1","type":"blocks","created_at":"2025-11-18T10:49:56.969881+01:00","created_by":"daemon"}]}
{"id":"bakepipe-bqy","content_hash":"5b2a8e193f5fab36eea4b322b54ee095d5e2fcded20833500db469cc66a3aee1","title":"Targets backend: update status/clean wrappers","description":"","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-18T14:07:12.74686+01:00","updated_at":"2025-11-18T14:07:12.74686+01:00","source_repo":"."}
{"id":"bakepipe-fyg","content_hash":"43e358a1d1f0cd60d7531956acc8417bd8c33d778e7c841da4692f5ab111cc33","title":"Final verification and R CMD check","description":"Complete package verification before release\n\nAutomatic checks:\n- devtools::check() with 0 errors, 0 warnings, 0 notes\n- R CMD check --as-cran passes\n- All unit tests pass (testthat)\n- All integration tests pass\n- Code coverage \u003e= 80%\n- lintr checks pass (if configured)\n\nManual verification:\n- Install from source in clean R session\n- Run example workflow from scratch\n- Check _targets.R is readable and sensible\n- Verify generated targets graph (tar_visnetwork)\n- Test on different platforms (if possible)\n- Review all documentation renders correctly\n\nPre-release checklist:\n- Version number updated\n- NEWS.md updated with changes\n- All GitHub issues referenced are addressed\n- No debugging code left in\n- Performance benchmarks documented","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-18T10:48:06.431975+01:00","updated_at":"2025-11-18T10:48:20.12671+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-fyg","depends_on_id":"bakepipe-0i7","type":"blocks","created_at":"2025-11-18T10:50:11.110202+01:00","created_by":"daemon"},{"issue_id":"bakepipe-fyg","depends_on_id":"bakepipe-9f0","type":"blocks","created_at":"2025-11-18T10:50:11.153798+01:00","created_by":"daemon"},{"issue_id":"bakepipe-fyg","depends_on_id":"bakepipe-8iu","type":"blocks","created_at":"2025-11-18T10:50:11.186832+01:00","created_by":"daemon"},{"issue_id":"bakepipe-fyg","depends_on_id":"bakepipe-mam","type":"blocks","created_at":"2025-11-18T10:50:11.216261+01:00","created_by":"daemon"}]}
{"id":"bakepipe-kxa","content_hash":"5b3c97091628a30ea337c7bbd1e700404acd2312395e83c7bc7afcad8994cd5c","title":"Modify clean() to use targets::tar_destroy()","description":"Implement clean() using targets for cleanup\n\nImplementation:\n- Call targets::tar_destroy() to remove targets store\n- Option to also remove generated _targets.R\n- Option to remove generated output files (careful!)\n- Preserve bakepipe's user-facing API\n\nVerification:\n- Test: clean() removes _targets/ directory\n- Test: After clean(), status() shows everything outdated\n- Test: Can run() after clean() successfully\n- Test: Optional cleanup of outputs works correctly\n- Safety: Confirm before deleting output files\n- Manual: No leftover targets artifacts after clean()","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T10:46:59.194714+01:00","updated_at":"2025-11-18T11:29:21.70871+01:00","closed_at":"2025-11-18T11:29:21.708716+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-kxa","depends_on_id":"bakepipe-6p1","type":"blocks","created_at":"2025-11-18T10:49:57.022443+01:00","created_by":"daemon"}]}
{"id":"bakepipe-mam","content_hash":"53cc596f298cd87470e7b1b458233571c6c2e7298ab733d6bb8de0a2b91f5acb","title":"Performance testing with targets backend","description":"Verify performance is acceptable with targets backend\n\nBenchmarks:\n1. Generate _targets.R for 10, 50, 100 scripts\n2. First run() of pipeline (cold start)\n3. run() with no changes (should skip everything)\n4. run() with one changed file (partial update)\n5. status() call on large pipeline\n6. Memory usage during execution\n\nTargets:\n- Generation: \u003c 1s for 100 scripts\n- Status check: \u003c 2s for 100 scripts\n- No-op run: \u003c 5s for 100 scripts\n- Memory: No significant increase vs standalone targets\n\nVerification:\n- Run benchmarks on reference machine\n- Document results in comments/docs\n- Compare to previous bakepipe version (if applicable)\n- Identify any bottlenecks","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-18T10:47:41.478796+01:00","updated_at":"2025-11-18T10:47:50.847007+01:00","source_repo":".","dependencies":[{"issue_id":"bakepipe-mam","depends_on_id":"bakepipe-7ho","type":"blocks","created_at":"2025-11-18T10:50:05.029399+01:00","created_by":"daemon"}]}
{"id":"bakepipe-rhv","content_hash":"48ea5b1a29022538bd30095525176fcfaab6a64857c8197c0758fa47be1d2787","title":"Add targets as dependency in DESCRIPTION","description":"Update package dependencies to include targets\n\nImplementation:\n- Add targets to Imports in DESCRIPTION\n- Specify minimum targets version if needed\n- Update any other package metadata\n- Consider: targets is heavy, document this tradeoff\n\nVerification:\n- devtools::check() passes\n- targets loads when bakepipe is loaded\n- Installation works from clean environment\n- Reverse dependency check (if any)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-18T10:47:09.35185+01:00","updated_at":"2025-11-18T10:59:28.358248+01:00","closed_at":"2025-11-18T10:59:28.358257+01:00","source_repo":"."}
